{"version":3,"sources":["webpack:///node_modules/@capacitor/camera/dist/esm/definitions.js","webpack:///node_modules/@capacitor/camera/dist/esm/index.js","webpack:///src/app/pages/b2b-view-product/b2b-view-product.page.ts","webpack:///src/app/services/b2b.service.ts","webpack:///src/app/pages/b2b-view-product/b2b-view-product.page.scss","webpack:///src/app/pages/b2b-view-product/b2b-view-product.page.html"],"names":["CameraSource","CameraDirection","CameraResultType","Camera","registerPlugin","web","then","m","CameraWeb","B2bViewProductPage","navCtrl","b2b","barcodeScanner","modalCtrl","_auth","deliveryPublish","alertCtrl","_comunc","loading","subsidiary","direccion_subsidiary_arr","Array","subsidiary_b2_mobile_data_product_list","formGroupSearch","FormGroup","search","FormControl","categorias_productos","subsidiary_last_b2b","data_modal_marca","baja_stock_info_count","allProductList","temporal_product_item","user_data","getUser","user","card_item","console","log","setTimeout","initt","fecha","format","sku","stock","create","cssClass","header","message","buttons","text","role","handler","blah","envio_stock","code_local","all","cod_local","idsku","is_active","rest_aviso","actualizaDatos","showAlert","getCategoriaProductos","alert","present","inputs","name","type","placeholder","data","producto","cat_pro","prod","saveToGallery","width","height","quality","allowEditing","resultType","source","correctOrientation","base64Image","img","dataUrl","model_lowstockproduc","id_subsidiary","id","id_product","product_photo","user_created","email","lowstockproduct","product","color","title","subTitle","subHeader","reset","product_category","subsidiaryb2bmobileproducts","product_valid","setColorCalifProduct","category_arr","validArr","length","forEach","category","idx_category","idx_product","find_valid_product","_","findIndex","o","e","Storage","key","value","JSON","parse","getLastB2bSubsiduary","getLastB2bSubsidiary","scan","barcodeData","setProductListAll","controls","setValue","filterItems","err","push","searchTerm","filter","item","toLowerCase","indexOf","getsubsidiaryB2bMobile","subsidiary_b2_mobile_data_product","cortar_string","address","split","dismiss","addItem","itemAdd","count","NavController","B2bService","BarcodeScanner","ModalController","UserServicesService","DeliveryServicesService","AlertController","ComunicacionComponentService","Input","Component","selector","template","http","base","url","subsidiary_id","headers","HttpHeaders","set","getDataToken","get","toPromise","id_brand","Promise","resolve","reject","productos_marcas","brand","multistore_id","HttpClient","BaseServicesService","Injectable","providedIn"],"mappings":"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","file":"default-src_app_pages_b2b-view-product_b2b-view-product_page_ts-es5.js","sourcesContent":["export var CameraSource;\n(function (CameraSource) {\n    /**\n     * Prompts the user to select either the photo album or take a photo.\n     */\n    CameraSource[\"Prompt\"] = \"PROMPT\";\n    /**\n     * Take a new photo using the camera.\n     */\n    CameraSource[\"Camera\"] = \"CAMERA\";\n    /**\n     * Pick an existing photo fron the gallery or photo album.\n     */\n    CameraSource[\"Photos\"] = \"PHOTOS\";\n})(CameraSource || (CameraSource = {}));\nexport var CameraDirection;\n(function (CameraDirection) {\n    CameraDirection[\"Rear\"] = \"REAR\";\n    CameraDirection[\"Front\"] = \"FRONT\";\n})(CameraDirection || (CameraDirection = {}));\nexport var CameraResultType;\n(function (CameraResultType) {\n    CameraResultType[\"Uri\"] = \"uri\";\n    CameraResultType[\"Base64\"] = \"base64\";\n    CameraResultType[\"DataUrl\"] = \"dataUrl\";\n})(CameraResultType || (CameraResultType = {}));\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\nconst Camera = registerPlugin('Camera', {\n    web: () => import('./web').then(m => new m.CameraWeb()),\n});\nexport * from './definitions';\nexport { Camera };\n//# sourceMappingURL=index.js.map","import { Component, Input, OnInit } from '@angular/core';\n\n//import { Storage } from '@ionic/storage';\nimport { Storage } from '@capacitor/storage';\nimport { BarcodeScanner } from '@ionic-native/barcode-scanner/ngx';\nimport { FormControl, FormGroup } from '@angular/forms';\n//import { Camera } from '@ionic-native/camera/ngx';\n//import { Camera } from '@capacitor/camera';\ndeclare var _:any;\nimport * as moment from 'moment';\nimport { AlertController, ModalController, NavController } from '@ionic/angular';\nimport { B2bService } from 'src/app/services/b2b.service';\nimport { UserServicesService } from 'src/app/services/user-services.service';\nimport { DeliveryServicesService } from 'src/app/services/delivery-services.service';\nimport { ComunicacionComponentService } from 'src/app/services/comunicacion-component.service';\nimport { Camera, CameraResultType,CameraSource } from '@capacitor/camera';\n\n\n@Component({\n  selector: 'app-b2b-view-product',\n  templateUrl: './b2b-view-product.page.html',\n  styleUrls: ['./b2b-view-product.page.scss'],\n})\nexport class B2bViewProductPage implements OnInit {\n  public base64Image: any;\n  loading = true;\n  subsidiary = null;\n  direccion_subsidiary_arr: any[] = new Array();\n  subsidiary_b2_mobile_data_product_list: any[] = new Array();\n  formGroupSearch = new FormGroup({\n    search: new FormControl(null)\n  })\n  categorias_productos: any = new Array();\n  subsidiary_last_b2b: any = null;\n  data_modal_marca = null;\n  user: any;\n  baja_stock_info_count = 0;\n  allProductList: any[] = new Array();\n  temporal_product_item = null;\n  @Input() card_item ;\n  constructor(public navCtrl: NavController,\n    private b2b: B2bService, private barcodeScanner: BarcodeScanner, private modalCtrl: ModalController,\n    private _auth: UserServicesService, private deliveryPublish: DeliveryServicesService,\n    public alertCtrl: AlertController, private _comunc: ComunicacionComponentService) {\n    let user_data = this._auth.getUser();\n    this.user = user_data[0];\n\n    //this.data_modal_marca = this.navParams.get('data');\n    \n    //console.log('data_learning: ', this.data_modal_marca);\n    //console.log('data_learning: ', this.card_item);\n\n    // this.formGroupSearch.controls.search.valueChanges.subscribe(async (search: any) => {\n    //   if (search === '') {\n    //     console.log('search-items-updates');\n    //     // this.getListProductSubsidiaryB2BMobile();\n    //     this.temporal_product_item = null;\n    //     this.categorias_productos = null;\n    //     this.categorias_productos = new Array();\n    //     await this.getCategoriaProductos();\n    //   }\n    // })\n  } \n  ngOnInit() {\n    this.data_modal_marca = this.card_item;\n    console.log('data_learning: ', this.card_item);\n    setTimeout(() => {\n      this.initt();\n      //})\n\n    }, 2000);\n  }\n\n  parse_fecha_b2b(fecha){\n    return moment(fecha).format('YYYY-MM-DD')\n  }\n\nasync eliminarProducto(sku:string, stock:number) {\n  const alert = await this.alertCtrl.create({\n    cssClass: 'my-custom-class',\n    header: '¡Confirma Quitar Producto!',\n    message: '¿Desea quitar este producto SKU:<strong>' + sku + '</strong>?',\n    buttons: [\n      {\n        text: 'NO',\n        role: 'cancel',\n        cssClass: 'secondary',\n        handler: (blah) => {\n          console.log('Confirm Cancel: blah');\n        }\n      }, {\n        text: 'SI',\n        handler: () => {\n          \n          /*\n          Quitar Producto\n          */\n          let envio_stock = {\n            code_local: this.subsidiary.all.cod_local,\n            cod_local: this.subsidiary.all.cod_local,\n            idsku:sku,\n            stock:0,\n            is_active: false\n          }\n          let rest_aviso =this.deliveryPublish.actualizaDatos(envio_stock);\n          console.log(rest_aviso);\n          this.showAlert('Producto Quitado', 'Se ha quitado Producto SKY ' + sku, ['OK']);\n          this.getCategoriaProductos();\n\n\n        }\n      }\n    ]\n  });\n\n  await alert.present();\n}\n\n\nasync editaStock(sku:string) {\n  console.log(\"this.subsidiary.id\" , this.subsidiary);\n  \n  const alert = await this.alertCtrl.create({\n    cssClass: 'my-custom-class',\n    header: 'Actualizar Stock: ',\n    inputs: [\n      {\n        name: 'stock',\n        type: 'number',\n        placeholder: 'Ingrese nuevo stock'\n      },\n      \n    ],\n    buttons: [\n      {\n        text: 'Cancelar',\n        role: 'cancel',\n        cssClass: 'secondary',\n        handler: () => {\n          console.log('Confirm Cancel');\n        }\n      }, {\n        text: 'Guardar',\n        handler: data => {\n          \n          /*\n          Enviar Stock\n          */\n          let envio_stock = {\n            code_local: this.subsidiary.all.cod_local,\n            cod_local: this.subsidiary.all.cod_local,\n            idsku:sku,\n            stock:data.stock,\n            is_active: true\n          }\n          let rest_aviso =this.deliveryPublish.actualizaDatos(envio_stock);\n          console.log(rest_aviso);\n          this.showAlert('Envío stock', 'Se ha enviado Stock', ['OK']);\n          this.getCategoriaProductos();\n          \n\n\n        }\n      }\n    ]\n  });\n\n  await alert.present();\n}\n\n\n\n  async registrarImagenLowStock(producto, cat_pro, prod) {\n    console.log('producto-low: ', producto);\n    /*this.camera.getPicture(\n      {\n      saveToPhotoAlbum: false,\n      targetWidth: 300,\n      targetHeight: 300,\n      quality: 100,\n      allowEdit: false,\n      encodingType: this.camera.EncodingType.PNG,\n      sourceType: this.camera.PictureSourceType.CAMERA,\n      destinationType: this.camera.DestinationType.DATA_URL,\n    }\n    \n    \n    ).then(async (imageData) => {*/\n      this.base64Image= await Camera.getPhoto({\n        saveToGallery:false,\n        width: 300,\n        height: 300,\n        quality: 100,\n        allowEditing: false,\n        resultType:CameraResultType.DataUrl,\n        source:CameraSource.Camera,\n        correctOrientation: true\n      })\n      let img = this.base64Image.dataUrl;\n      let model_lowstockproduc = {\n        id_subsidiary: this.subsidiary.id,\n        id_product: producto.id,\n        product_photo: img,\n        user_created: this.user.email\n      }\n\n      try {\n\n        let rest_aviso = await this.deliveryPublish.lowstockproduct(model_lowstockproduc);\n\n        console.log('rest_aviso_low_product:', rest_aviso);\n        if (rest_aviso != null) {\n\n          // let find_error_key = Object.keys(rest_aviso).indexOf('non_field_errors');\n          // if (find_error_key > -1) {\n          // } else {\n\n          this.categorias_productos[cat_pro].product[prod].color = '#CCFF90';\n          this.baja_stock_info_count = this.baja_stock_info_count + 1;\n          // }\n          //marcar el producto como registrado\n        }\n\n      } catch (e) {\n\n        this.showAlert('Error bajo stock', 'este producto ya se encuentra informado con bajo stock', ['OK']);\n      }\n\n\n      //this.modelPos.controls.picture_business.setValue(this.base64Image);\n    //}, error => {\n\n    //});\n  }\n\n\n  async registrarImagenLowStockFilter(producto) {\n    console.log('producto-low: ', producto);\n  /* this.camera.getPicture({\n      saveToPhotoAlbum: false,\n      targetWidth: 300,\n      targetHeight: 300,\n      quality: 100,\n      allowEdit: false,\n      encodingType: this.camera.EncodingType.PNG,\n      sourceType: this.camera.PictureSourceType.CAMERA,\n      destinationType: this.camera.DestinationType.DATA_URL,\n    }).then(async (imageData) => {*/\n      this.base64Image= await Camera.getPhoto({\n        saveToGallery:false,\n        width: 300,\n        height: 300,\n        quality: 100,\n        allowEditing: false,\n        resultType:CameraResultType.DataUrl,\n        source:CameraSource.Camera,\n        correctOrientation: true\n      })\n\n     \n      let img = this.base64Image.dataUrl;\n      let model_lowstockproduc = {\n        id_subsidiary: this.subsidiary.id,\n        id_product: producto.id,\n        product_photo: img,\n        user_created: this.user.email\n      }\n\n      try {\n\n        let rest_aviso = await this.deliveryPublish.lowstockproduct(model_lowstockproduc);\n\n        console.log('rest_aviso_low_product:', rest_aviso);\n        if (rest_aviso != null) {\n\n          // let find_error_key = Object.keys(rest_aviso).indexOf('non_field_errors');\n          // if (find_error_key > -1) {\n          // } else {\n\n          this.getCategoriaProductos();\n          this.baja_stock_info_count = this.baja_stock_info_count + 1;\n          // }\n          //marcar el producto como registrado\n        }\n\n      } catch (e) {\n\n        this.showAlert('Error bajo stock', 'este producto ya se encuentra informado con bajo stock', ['OK']);\n      }\n\n\n      //this.modelPos.controls.picture_business.setValue(this.base64Image);\n    //}, error => {\n\n    //});\n  }\n\n\n  async showAlert(title, subTitle, buttons) {\n    const alert = await this.alertCtrl.create({\n      //title: title,\n      //subTitle: subTitle,\n      header: title,\n      subHeader: subTitle,\n      buttons: buttons\n    });\n    await  alert.present();\n  }\n\n\n\n\n\n  async getCategoriaProductos() {\n\n    /**\n     * obtiene los productos del subisidiary por categoria\n     */\n    //this.subsidiary.id\n    this.categorias_productos = null;\n    this.categorias_productos = new Array();\n    this.temporal_product_item = null;\n    this.allProductList = new Array();\n    this.formGroupSearch.reset();\n    try {\n      this.loading=true;\n      console.log('product-valid: ',this.subsidiary.id,' modal',);\n      // console.log('dataCategoriaProductos:',{subisidiary_id:this.subsidiary.id,marca:this.data_modal_marca.card_item.id});\n      let product_category: any = await this.b2b.getCategoriaProductos(this.subsidiary.id, this.data_modal_marca.id);\n      let product_valid:any = await this.deliveryPublish.subsidiaryb2bmobileproducts(this.subsidiary.id,this.data_modal_marca.id);\n      console.log('product-valid: ',product_valid);\n      this.categorias_productos = product_category;\n      console.log('categorias productos: ', this.categorias_productos);\n      this.setColorCalifProduct(this.categorias_productos,product_valid);\n      this.loading=false;\n    } catch (e) {\n      console.log('error:', e);\n    }\n  }\n\n\n\n\n  setColorCalifProduct(category_arr,validArr) {\n    try {\n\n      if(validArr.length>0){\n\n      \n          \n          category_arr.forEach((category, idx_category) => {\n            category.product.forEach((product, idx_product) => {\n              let find_valid_product= _.findIndex(validArr,(o)=>{\n                return o.id_product==product.id;\n              })\n\n              if(find_valid_product>-1){\n                this.categorias_productos[idx_category].product[idx_product].color = '#CCFF90';\n              }else{\n                this.categorias_productos[idx_category].product[idx_product].color = '#FCE4EC';\n              }\n            \n    \n            });\n          });\n    \n      }else{\n        category_arr.forEach((category, idx_category) => {\n          category.product.forEach((product, idx_product) => {\n         \n              if (product.stock <= 5) {\n                this.categorias_productos[idx_category].product[idx_product].color = '#FCE4EC';\n              }\n\n            \n  \n          });\n        });\n      }\n\n    } catch (e) {\n      console.log('error setColorCalifProduct: ', e);\n    }\n  }\n\n\n ionViewDidLoad() {\n\n\n\n    setTimeout(() => {\n      this.initt();\n      //})\n\n    }, 2000);\n\n\n  }\n\n  async initt()\n  {\n    console.log('ionViewDidLoad BeToBePage');\n\n      this.loading = true;\n  \n    const  value  = await Storage.get({ key: 'subsidiary'});\n   \n     // this.storage.get('subsidiary').then(async (subsidiary: any) => {\n        this.subsidiary = JSON.parse(value.value);\n \n        // await this.getListProductSubsidiaryB2BMobile();\n        await this.getCategoriaProductos();\n        await this.getLastB2bSubsiduary();\n\n        console.log('getSubsidiary: ', this.subsidiary);\n        this.loading = false;\n  }\n\n  async getLastB2bSubsiduary() {\n    try {\n\n      this.subsidiary_last_b2b = await this.b2b.getLastB2bSubsidiary(this.subsidiary.id);\n\n    } catch (e) {\n\n    }\n  }\n\n\n  async buscarProducto() {\n    // this.temporal_product_item = null;\n    // this.allProductList = new Array();\n    // await this.getCategoriaProductos();\n\n    this.barcodeScanner.scan().then(async (barcodeData) => {\n      if (barcodeData.text === \"\") {\n        this.temporal_product_item = null;\n        this.allProductList = new Array();\n        await this.getCategoriaProductos();\n      } else {\n\n        await this.setProductListAll();\n\n        console.log('temporal_product_item: ',this.temporal_product_item);\n        this.formGroupSearch.controls.search.setValue(barcodeData.text);\n        this.temporal_product_item = this.filterItems(barcodeData.text);\n\n        // this.categorias_productos=null;\n        // this.categorias_productos=new Array();\n      }\n      console.log('Barcode data', barcodeData);\n    }).catch(err => {\n      console.log('Error', err);\n    });\n  }\n\n  async setProductListAll() {\n    this.categorias_productos.forEach((category) => {\n      category.product.forEach(producto => {\n        this.allProductList.push(producto);\n        console.log('producto_item: ',producto);\n      });\n    });\n    return true;\n  }\n\n\n  filterItems(searchTerm) {\n    return this.allProductList.filter((item) => {\n      return item.idsku.toLowerCase().indexOf(\n        searchTerm.toLowerCase()) > -1;\n    });\n  }\n\n\n  async getListProductSubsidiaryB2BMobile() {\n\n    /**\n     * Obtiene la lista de productos en b2b\n     */\n\n    let subsidiary_b2_mobile_data_product: any = await this.b2b.getsubsidiaryB2bMobile(this.subsidiary.id);\n    this.subsidiary_b2_mobile_data_product_list = subsidiary_b2_mobile_data_product;\n    this.cortar_string(this.subsidiary.all.address);\n    console.log('b2b_product: ', subsidiary_b2_mobile_data_product);\n\n  }\n\n\n  cortar_string(value: string) {\n    try {\n      console.log('corta_string: ', value.split(','));\n      this.direccion_subsidiary_arr = value.split(',');\n\n    } catch (e) { }\n  }\n\n  goBack() {\n    //this.navCtrl.pop();\n    this.modalCtrl.dismiss({\n      'dismissed': true\n    });\n    this._comunc.addItem({ name: 'low-stock-count', itemAdd: { count: this.baja_stock_info_count } });\n\n  }\n\n\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { BaseServicesService } from './base-services.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class B2bService {\n  public url: string = 'https://vm-icov-003.riosoft.cl/api/v1/';\n  // public url: string = 'http://192.168.100.9:8001/api/v1/';\n\n  constructor(public http: HttpClient,\n    public base: BaseServicesService) { \n      console.log('Hello B2bProvider Provider');\n    }\n\n    getsubsidiaryB2bMobile(subsidiary_id) {\n      let headers = new HttpHeaders().set('Content-Type', 'application/json').set('Authorization', 'Bearer ' + this.base.getDataToken());\n      return this.http.get(this.url + 'reports/subsidiary-b2b-mobile/?id_subsidiary=' + subsidiary_id, { headers: headers }).toPromise();\n    }\n  \n    getCategoriaProductos(subsidiary_id?,id_brand?) {\n      /**\n       *  @param subsidiary_id\n       * \n       * \n       */\n  \n      return new Promise(async (resolve, reject) => {\n  \n        let productos_marcas: any = new Array();\n  \n        try {\n  \n          let headers = new HttpHeaders().set('Content-Type', 'application/json').set('Authorization', 'Bearer ' + this.base.getDataToken());\n          //     /**obteniendo las categorias de productos */\n          productos_marcas = await this.http.get(this.url + 'reports/subsidiary-b2b-mobile/?id_subsidiary='+subsidiary_id+'&id_brand='+id_brand+'', { headers: headers }).toPromise();\n          resolve(productos_marcas);\n  \n  \n        } catch (e) { }\n  \n      })\n  \n  \n    }\n  \n  \n    getMarcaAndAgency() {\n      let headers = new HttpHeaders().set('Content-Type', 'application/json').set('Authorization', 'Bearer ' + this.base.getDataToken());\n      /**obteniendo las categorias de productos */\n      return this.http.get(this.url + 'brands/', { headers: headers }).toPromise();\n    }\n  \n    getLastB2bSubsidiary(subsidiary_id) {\n      let headers = new HttpHeaders().set('Content-Type', 'application/json').set('Authorization', 'Bearer ' + this.base.getDataToken());\n      /**obteniendo las categorias de productos */\n      return this.http.get(this.url + 'reports/subsidiary-last-b2b/?id_subsidiary=' + subsidiary_id, { headers: headers }).toPromise();\n  \n    }\n  \n  \n    getValidaMarcas(brand,multistore_id){\n      let headers = new HttpHeaders().set('Content-Type', 'application/json').set('Authorization', 'Bearer ' + this.base.getDataToken());\n      /**obteniendo las categorias de productos */\n      return this.http.get(this.url + 'multistore-product-check/?brand=' + brand+'&multistore_id='+multistore_id, { headers: headers }).toPromise();\n    }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJiMmItdmlldy1wcm9kdWN0LnBhZ2Uuc2NzcyJ9 */\";","export default \"<!--\\n  Generated template for the B2bViewProductPage page.\\n\\n  See http://ionicframework.com/docs/components/#navigation for more info on\\n  Ionic pages and navigation.\\n-->\\n\\n<ion-header no-border>\\n  <ion-toolbar color='violet'>\\n    <ion-buttons slot=\\\"start\\\" >\\n      <ion-button  (click)=\\\"goBack()\\\" >\\n        <ion-icon name=\\\"close\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n    <ion-title>{{subsidiary?.title}}</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n\\n<ion-content style=\\\"background:#F5F5F5\\\" class=\\\"ion-padding\\\">\\n\\n\\n  <div *ngIf=\\\"loading\\\" style=\\\"text-align:center\\\">\\n\\n    <h3 style=\\\"margin-block-start: 10em;text-align: center;color:#757575\\\">\\n      Cargando productos...\\n    </h3>\\n\\n    <ion-spinner name=\\\"bubbles\\\"></ion-spinner>\\n\\n  </div>\\n\\n  <div *ngIf=\\\"!loading\\\">\\n\\n\\n\\n\\n\\n    <div *ngIf=\\\"categorias_productos?.length==0\\\">\\n      <h3 style=\\\"margin-block-start: 10em;text-align: center;color:#616161\\\">Sin productos para esta marca</h3>\\n    </div>\\n\\n\\n    <div *ngIf=\\\"categorias_productos?.length>0\\\">\\n\\n      <form [formGroup]=\\\"formGroupSearch\\\">\\n        <ion-searchbar formControlName=\\\"search\\\" (click)=\\\"buscarProducto()\\\"></ion-searchbar>\\n      </form>\\n\\n      <ion-list>\\n        <ion-scroll scrollY=\\\"true\\\" style=\\\"height:100vh;\\\">\\n\\n          <div *ngIf=\\\"temporal_product_item!=null\\\">\\n\\n            <div *ngFor=\\\"let producto of temporal_product_item;let pro=index\\\">\\n              <ion-item-sliding #item>\\n                <ion-item [ngStyle]=\\\"{'background-color': producto?.color}\\\">\\n                  <ion-avatar item-start style=\\\"margin-left:1em !important; margin-right:1em !important;\\\">\\n                    <img [src]=\\\"producto?.product_photo\\\">\\n                  </ion-avatar>\\n                 \\n                  <h3 style=\\\"color:#37474F\\\">{{producto?.product_description}}</h3>\\n                  <p>SKU: {{producto?.idsku}}</p>\\n                  <p>Codigo de barra: {{producto?.bar_code}}</p>\\n                  <p>fecha ultimo b2b: {{parse_fecha_b2b(producto?.last_b2b)}} </p>\\n                  <p>Ventas: {{producto?.sales}}</p>\\n                  <p>Stock: {{producto?.stock}} <ion-icon name=\\\"create-outline\\\" (click)=\\\"editaStock(producto?.idsku);\\\"></ion-icon></p>\\n                  <p>Precio: {{producto?.value}}</p>\\n                  <p><ion-icon name=\\\"trash-outline\\\" (click)=\\\"eliminarProducto(producto?.idsku,producto?.stock);\\\"></ion-icon></p>\\n                  \\n                </ion-item>\\n                <!-- <ion-item-options side=\\\"left\\\">\\n                      <button ion-button (click)=\\\"favorite(item)\\\">Favorite</button>\\n                      <button ion-button color=\\\"danger\\\" (click)=\\\"share(item)\\\">Share</button>\\n                    </ion-item-options> -->\\n\\n                <!--<ion-item-options side=\\\"start\\\">\\n                  <ion-button *ngIf=\\\"producto?.color==='#FCE4EC'\\\" ion-button\\n                    (click)=\\\"registrarImagenLowStockFilter(producto)\\\">\\n                    <ion-icon name=\\\"camera\\\"></ion-icon>\\n                  </ion-button>\\n                  <ion-button *ngIf=\\\"producto?.color==='#CCFF90'\\\" ion-button>\\n                    <ion-icon name=\\\"checkmark\\\"></ion-icon>\\n                  </ion-button>\\n                </ion-item-options>-->\\n              </ion-item-sliding>\\n            </div>\\n            <br />\\n            <button ion-button block clear (click)=\\\"getCategoriaProductos()\\\">\\n              <ion-icon name=\\\"trash\\\"></ion-icon>\\n            </button>\\n \\n\\n          </div>\\n\\n          <div *ngIf=\\\"temporal_product_item==null\\\">\\n\\n            <div *ngFor=\\\"let categoria of categorias_productos;let cat_pro=index\\\">\\n\\n              <accordion>\\n                <accordion-group [heading]=\\\"categoria?.category\\\" [isOpened]=\\\"false\\\">\\n               \\n                  <div *ngIf=\\\"categoria?.product?.length>0\\\">\\n                    <div *ngFor=\\\"let producto of categoria.product;let pro=index\\\">\\n  \\n                      <ion-item-sliding #item>\\n                        <ion-item [ngStyle]=\\\"{'background-color': producto?.color}\\\">\\n                          <ion-avatar item-start style=\\\"margin-left:1em !important; margin-right:1em !important;\\\">\\n                            <img [src]=\\\"producto?.product_photo\\\">\\n                          </ion-avatar>\\n                          <ion-label>\\n                          <h3 style=\\\"color:#37474F\\\">{{producto?.product_description}}</h3>\\n                          <p>SKU: {{producto?.idsku}}</p>\\n                          <p>Codigo de barra: {{producto?.bar_code}}</p>\\n                          <p>fecha ultimo b2b: {{parse_fecha_b2b(producto?.last_b2b)}}</p>\\n                          <p>Ventas: {{producto?.sales}}</p>\\n                          <p>Stock: {{producto?.stock}} <ion-icon name=\\\"create-outline\\\" (click)=\\\"editaStock(producto?.idsku);\\\"></ion-icon></p>\\n                          <p>Precio: {{producto?.value}}</p>\\n                          <p><ion-icon name=\\\"trash-outline\\\" (click)=\\\"eliminarProducto(producto?.idsku);\\\"></ion-icon></p>\\n                           </ion-label>\\n                        </ion-item> \\n                        <!-- <ion-item-options side=\\\"left\\\">\\n                                        <button ion-button (click)=\\\"favorite(item)\\\">Favorite</button>\\n                                        <button ion-button color=\\\"danger\\\" (click)=\\\"share(item)\\\">Share</button>\\n                                      </ion-item-options> -->\\n  \\n                        <!--<ion-item-options side=\\\"start\\\">\\n                          <ion-button *ngIf=\\\"producto?.color==='#FCE4EC'\\\" ion-button\\n                            (click)=\\\"registrarImagenLowStock(producto,cat_pro,pro)\\\">\\n                            <ion-icon name=\\\"camera\\\"></ion-icon>\\n                          </ion-button>\\n                          <ion-button *ngIf=\\\"producto?.color==='#CCFF90'\\\" ion-button>\\n                            <ion-icon name=\\\"checkmark\\\"></ion-icon>\\n                          </ion-button>\\n                        </ion-item-options>-->\\n                      </ion-item-sliding>\\n  \\n                      <!-- <ion-item>\\n                                  <ion-avatar item-start style=\\\"margin-left:1em !important; margin-right:1em !important;\\\">\\n                                    <img [src]=\\\"producto?.product_photo\\\">\\n                                  </ion-avatar>\\n                                  <!-- <h2>title</h2> -->\\n                      <!-- <h3>{{producto?.product_description}}</h3>\\n                                  <p>SKU: {{producto?.idsku}}</p>\\n                                  <p>Codigo de barra: {{producto?.bar_code}}</p> -->\\n                      <!-- <p>fecha ultimo b2b</p> -->\\n                      <!-- <p>Ventas: {{producto?.sales}}</p>\\n                                  <p>Stock: {{producto?.stock}}</p>\\n                                  <p>Precio: {{producto?.value}}</p>\\n                                </ion-item> -->\\n                    </div>\\n  \\n                  </div>\\n                  <div style=\\\"margin-left:auto !important; margin-right:auto !important\\\"\\n                    *ngIf=\\\"categoria?.productos?.length==0\\\">\\n                    <!-- <i class=\\\"material-icons\\\">\\n                                remove_shopping_cart\\n                              </i>\\n                              <p>Sin productos para esta categoria</p> -->\\n                  </div>\\n                  <!-- <ion-item>\\n                            <ion-avatar item-start>\\n                              <img [src]=\\\"subsidiary?.all.picture_business\\\">\\n                            </ion-avatar>\\n                            <h2 style=\\\"color:#757575\\\">{{product?.sales}}</h2>\\n                            <h3 style=\\\"color:#757575\\\">{{product?.stock}}</h3>\\n                            <p style=\\\"color:#757575\\\">{{product?.idsku}}.</p>\\n                      \\n                          </ion-item> -->\\n\\n                </accordion-group>  \\n\\n\\n\\n              </accordion>\\n\\n\\n\\n\\n            </div>\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n          </div>\\n\\n        </ion-scroll>\\n      </ion-list>\\n\\n    </div>\\n\\n  </div>\\n\\n</ion-content>\\n\";"]}